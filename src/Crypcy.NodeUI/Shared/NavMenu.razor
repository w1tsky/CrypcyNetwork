@using Crypcy.NodeUI.Services
@inject NodeUiService UiService


<div class="sidebar navbar navbar-dark bg-dark">
    <button title="Navigation menu" class="navbar-toggler" @onclick="ToggleNavMenu">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse @NavMenuCssClass bg-dark p-4" @onclick="ToggleNavMenu">
        <ul class="navbar-nav mr-auto text-white">
            <li class="nav-item px-3">
                <a class="nav-link text-white" href="">
                    <span class="fa fa-home fa-md" aria-hidden="true"> Home</span> 
                </a>
            </li>
            <li class="nav-item px-3">
                <a class="nav-link text-white" href="connect">
                    <span class="fa fa-plus fa-md" aria-hidden="true"> Connect</span>
                </a>
            </li>
            <li class="nav-item px-3">
                <a class="nav-link text-white" href="chat">
                    <span class="fa fa-comments fa-md" aria-hidden="true"> Chat</span>
                </a>
            </li>
            <li class="nav-item px-3">
                <a class="nav-link text-white" href="groups">
                    <span class="fa-solid fa-user-group fa-md" aria-hidden="true"> Groups</span>
                </a>
            </li>
        </ul>
    </div>
    <div class="configuration p-4">
        <h5 class="text-white py-2">Configuration</h5>
        <div class="form-group py-2">
            <label for="port-input" class="text-white">Port:</label>
            <input id="port-input" type="number" class="form-control" placeholder="Enter an port..." @bind-value="port" @bind-value:event="oninput" />
            <button type="button" class="btn btn-primary @(isNodeStarted ? "disabled" : "")" @onclick="() => StartNode(port)">Start</button>
            <button type="button" class="btn btn-secondary @(isNodeStarted ? "" : "disabled")" @onclick="() => StopNode()">Stop</button>
        </div>
    </div>
</div>





@code {
    private int port;
    protected bool isNodeStarted = false;

    private void StartNode(int port)
    {
        UiService.NodeStart(port);
        isNodeStarted = true;
    }

    private void StopNode()
    {
        UiService.NodeStop();
        isNodeStarted = false;
    }

    private bool collapseNavMenu = true;

    private string NavMenuCssClass => collapseNavMenu ? "collapse" : null;

    private void ToggleNavMenu()
    {
        collapseNavMenu = !collapseNavMenu;
    }
}